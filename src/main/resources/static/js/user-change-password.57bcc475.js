(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-change-password"],{"261e":function(e,n,t){},"323e":function(e,n,t){var r,o;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(s,i){r=i,o="function"===typeof r?r.call(n,t,n,e):r,void 0===o||(e.exports=o)})(0,function(){var e={version:"0.2.0"},n=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function t(e,n,t){return e<n?n:e>t?t:e}function r(e){return 100*(-1+e)}function o(e,t,o){var s;return s="translate3d"===n.positionUsing?{transform:"translate3d("+r(e)+"%,0,0)"}:"translate"===n.positionUsing?{transform:"translate("+r(e)+"%,0)"}:{"margin-left":r(e)+"%"},s.transition="all "+t+"ms "+o,s}e.configure=function(e){var t,r;for(t in e)r=e[t],void 0!==r&&e.hasOwnProperty(t)&&(n[t]=r);return this},e.status=null,e.set=function(r){var a=e.isStarted();r=t(r,n.minimum,1),e.status=1===r?null:r;var c=e.render(!a),u=c.querySelector(n.barSelector),l=n.speed,f=n.easing;return c.offsetWidth,s(function(t){""===n.positionUsing&&(n.positionUsing=e.getPositioningCSS()),i(u,o(r,l,f)),1===r?(i(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout(function(){i(c,{transition:"all "+l+"ms linear",opacity:0}),setTimeout(function(){e.remove(),t()},l)},l)):setTimeout(t,l)}),this},e.isStarted=function(){return"number"===typeof e.status},e.start=function(){e.status||e.set(0);var t=function(){setTimeout(function(){e.status&&(e.trickle(),t())},n.trickleSpeed)};return n.trickle&&t(),this},e.done=function(n){return n||e.status?e.inc(.3+.5*Math.random()).set(1):this},e.inc=function(n){var r=e.status;return r?("number"!==typeof n&&(n=(1-r)*t(Math.random()*r,.1,.95)),r=t(r+n,0,.994),e.set(r)):e.start()},e.trickle=function(){return e.inc(Math.random()*n.trickleRate)},function(){var n=0,t=0;e.promise=function(r){return r&&"resolved"!==r.state()?(0===t&&e.start(),n++,t++,r.always(function(){t--,0===t?(n=0,e.done()):e.set((n-t)/n)}),this):this}}(),e.render=function(t){if(e.isRendered())return document.getElementById("nprogress");c(document.documentElement,"nprogress-busy");var o=document.createElement("div");o.id="nprogress",o.innerHTML=n.template;var s,a=o.querySelector(n.barSelector),u=t?"-100":r(e.status||0),l=document.querySelector(n.parent);return i(a,{transition:"all 0 linear",transform:"translate3d("+u+"%,0,0)"}),n.showSpinner||(s=o.querySelector(n.spinnerSelector),s&&f(s)),l!=document.body&&c(l,"nprogress-custom-parent"),l.appendChild(o),o},e.remove=function(){u(document.documentElement,"nprogress-busy"),u(document.querySelector(n.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&f(e)},e.isRendered=function(){return!!document.getElementById("nprogress")},e.getPositioningCSS=function(){var e=document.body.style,n="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return n+"Perspective"in e?"translate3d":n+"Transform"in e?"translate":"margin"};var s=function(){var e=[];function n(){var t=e.shift();t&&t(n)}return function(t){e.push(t),1==e.length&&n()}}(),i=function(){var e=["Webkit","O","Moz","ms"],n={};function t(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,n){return n.toUpperCase()})}function r(n){var t=document.body.style;if(n in t)return n;var r,o=e.length,s=n.charAt(0).toUpperCase()+n.slice(1);while(o--)if(r=e[o]+s,r in t)return r;return n}function o(e){return e=t(e),n[e]||(n[e]=r(e))}function s(e,n,t){n=o(n),e.style[n]=t}return function(e,n){var t,r,o=arguments;if(2==o.length)for(t in n)r=n[t],void 0!==r&&n.hasOwnProperty(t)&&s(e,t,r);else s(e,o[1],o[2])}}();function a(e,n){var t="string"==typeof e?e:l(e);return t.indexOf(" "+n+" ")>=0}function c(e,n){var t=l(e),r=t+n;a(t,n)||(e.className=r.substring(1))}function u(e,n){var t,r=l(e);a(e,n)&&(t=r.replace(" "+n+" "," "),e.className=t.substring(1,t.length-1))}function l(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function f(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return e})},"454f":function(e,n,t){t("46a7");var r=t("584a").Object;e.exports=function(e,n,t){return r.defineProperty(e,n,t)}},"46a7":function(e,n,t){var r=t("63b6");r(r.S+r.F*!t("8e60"),"Object",{defineProperty:t("d9f6").f})},"85f2":function(e,n,t){e.exports=t("454f")},"90ac":function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"d",function(){return i}),t.d(n,"c",function(){return a}),t.d(n,"b",function(){return c}),t.d(n,"e",function(){return u}),t.d(n,"f",function(){return l});var r=t("c3de"),o=new r["a"],s=function(e,n){return o.post("user/login",e,n)},i=function(e,n){return o.post("/user/registe",e,n)},a=function(e,n){return o.get("user/getUploadRecords",e,n)},c=function(e,n){return o.get("user/getDownloadRecords",e,n)},u=function(e,n){return o.post("user/mail/sendCode",e,n)},l=function(e,n){return o.post("user/setPassword",e,n)}},"94e6":function(e,n,t){"use strict";var r=t("261e"),o=t.n(r);o.a},a5d8:function(e,n,t){},a970:function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("el-main",{staticClass:"user-change"},[t("el-row",{attrs:{type:"flex",justify:"center"}},[t("el-col",{staticClass:"user-change-form",attrs:{xs:18,sm:12,md:10,lg:8,xl:6}},[t("el-input",{staticClass:"user-change-form-item",attrs:{placeholder:"邮箱","prefix-icon":"el-icon-info"},model:{value:e.changeForm.email,callback:function(n){e.$set(e.changeForm,"email",n)},expression:"changeForm.email"}}),t("el-input",{staticClass:"user-change-form-item",attrs:{placeholder:"验证码","prefix-icon":"el-icon-info"},model:{value:e.changeForm.verificationCode,callback:function(n){e.$set(e.changeForm,"verificationCode",n)},expression:"changeForm.verificationCode"}},[t("el-button",{attrs:{slot:"append",type:"primary",size:"mini",disabled:e.isDisable},on:{click:e.getVerificationCode},slot:"append"},[e._v(e._s(e.buttonText)+"\n                ")])],1),t("el-input",{staticClass:"user-change-form-item",attrs:{type:"password",placeholder:"新密码","prefix-icon":"el-icon-info"},model:{value:e.changeForm.password,callback:function(n){e.$set(e.changeForm,"password",n)},expression:"changeForm.password"}}),t("el-input",{staticClass:"user-change-form-item",attrs:{type:"password",placeholder:"请确认新密码","prefix-icon":"el-icon-info"},model:{value:e.changeForm.password2,callback:function(n){e.$set(e.changeForm,"password2",n)},expression:"changeForm.password2"}}),t("el-button",{staticClass:"user-change-form-button",attrs:{type:"primary"},on:{click:e.change}},[e._v("确认修改")])],1)],1),t("el-row",{attrs:{type:"flex",justify:"center"}},[t("el-col",{staticClass:"router-jump"},[t("div",{on:{click:e.goLogin}},[e._v("返回登录")])])],1)],1)},o=[],s=t("90ac"),i={name:"UserChangePassword",data:function(){return{isDisable:!1,buttonText:"获取验证码",seconds:60,changeForm:{email:"",verificationCode:"",password:"",password2:""}}},methods:{change:function(){var e=this;if(this.isForm())this.$message.error("邮箱格式不正确/密码不一致/未填写完整");else{var n={code:this.changeForm.verificationCode,password:this.changeForm.password,email:this.changeForm.email};Object(s["f"])(n,function(n){e.$message.success("密码修改成功！"),e.$fn.routerChange("user/login",e)})}},isForm:function(){return!this.changeForm.password||!this.changeForm.password2||this.changeForm.password!==this.changeForm.password2||!this.changeForm.email||!this.changeForm.verificationCode||!this.isEmail(this.changeForm.email)},getVerificationCode:function(){var e=this;console.log("获取验证码"),this.isEmail(this.changeForm.email)?(this.setButtonText(),Object(s["e"])({email:this.changeForm.email},function(n){return e.$message.success("验证码已发送")})):this.$message.error("邮箱格式不正确")},setButtonText:function(){var e=this;this.isDisable=!0;var n=setInterval(function(){e.seconds--,e.buttonText=e.seconds+"秒后重发"},1e3);setTimeout(function(){e.isDisable=!1,clearInterval(n),e.seconds=60,e.buttonText="获取验证码"},6e4)},isEmail:function(e){var n=/^\w+@[a-zA-Z0-9]{2,10}(?:\.[a-z]{2,4}){1,3}$/;return n.test(e)},goLogin:function(){this.$fn.routerChange("/user/login",this)}}},a=i,c=(t("94e6"),t("2877")),u=Object(c["a"])(a,r,o,!1,null,"3ea6cdf4",null);n["default"]=u.exports},b0b4:function(e,n,t){"use strict";t.d(n,"a",function(){return i});var r=t("85f2"),o=t.n(r);function s(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(e,r.key,r)}}function i(e,n,t){return n&&s(e.prototype,n),t&&s(e,t),e}},c3de:function(e,n,t){"use strict";t.d(n,"a",function(){return b});var r=t("d225"),o=t("b0b4"),s=t("a026"),i=t("bc3a"),a=t.n(i),c=t("455a"),u=t("323e"),l=t.n(u),f=(t("a5d8"),t("4328")),d=t.n(f),m=new s["default"],p="application/x-www-form-urlencoded",h="multipart/form-data",g=Object(c["getLocation"])(window.location.href),v=g.protocol+"//"+g.host,b=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;Object(r["a"])(this,e),this._axiosInstance=this.createInstance(n)}return Object(o["a"])(e,[{key:"createInstance",value:function(e){var n=a.a.create({transformRequest:[function(e){return e=d.a.stringify(e),e}],headers:{"Content-Type":e},timeout:15e3,withCredentials:!0,baseURL:v});return n.interceptors.response.use(function(e){return 200===e.data.code?Promise.resolve(e.data):Promise.reject(e.data)},function(e){var n=e.response;if(n)return Promise.reject(n.data);m.$message.error("网络似乎出了一些状况")}),n}},{key:"uploadFileInstance",value:function(){return a.a.create({headers:{"Content-Type":h},withCredentials:!0,baseURL:v})}},{key:"get",value:function(e,n,t){return l.a.start(),this.axiosInstance.get(e,{params:n}).then(function(e){return l.a.done(),t(e)},function(e){throw l.a.done(),m.$message({showClose:!0,message:e.message,type:"error"}),console.log(e),new Error("出错啦")}).catch(function(e){l.a.done(),console.log(e)})}},{key:"post",value:function(e,n,t){return l.a.start(),this.axiosInstance.post(e,n,{transformRequest:[function(e){var n="";for(var t in e)n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t])+"&";return n}],withCredentials:!0}).then(function(e){return l.a.done(),t(e)},function(e){throw l.a.done(),m.$message({showClose:!0,message:e.message,type:"error"}),console.log(e),new Error("出错啦")}).catch(function(e){l.a.done(),console.log(e)})}},{key:"axiosInstance",get:function(){return this._axiosInstance}}]),e}()},d225:function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.d(n,"a",function(){return r})}}]);
//# sourceMappingURL=user-change-password.57bcc475.js.map